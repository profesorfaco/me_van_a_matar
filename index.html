<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Visualización</title>
    <style>
      *{margin:0; padding:0;}
      html{font-family: Helvetica, Arial, sans-serif; background:#fafafa; font-size:0.8rem;}
      header{padding:5% 12% 0 12%;}
      header h1{
        margin:0 15%;
        text-align: center;
      }
      header p{
        line-height: 1.5;
        margin:3% 0;
      }
      main{padding:0 10%;}
      main article{box-shadow: 0 0 5px #eee; border-radius: 4px;}
      footer{padding:3% 15%; clear:both;}
      footer p{
        text-align: center;
      }
      article{float:left; margin:1%; padding:1%; width:21%; background:#fff; text-align: center;}
      @media (orientation: portrait) {
        article{width:46%}
      }
    </style>
  </head>
  <body>
    <header>
      <h1>¿Qué porcentaje de sus inscripciones en Proyecto de Título II aprueba Examen de Título?</h1>
      <p>Se consultan datos en UCampus. Se consideran "ocupados" en distintas secciones de Proyecto de Título II a cargo de un(a) mismo(a) Profesor(a) entre segundo semestre de 2021 y segundo semestre de 2024. Una inscripción no debe considerarse como una persona, cuando una misma persona puede inscribir Proyecto de Título II más de 1 vez.</p>
    </header>
    <main></main>
    <footer>
      <p><small>Diseño y visualización de información | Diseño mención Visual y Medios | Universidad de Chile</small></p>
    </footer>
  <script>
    const alla = document.querySelector("main");
    async function datos() {
      const consulta = await fetch("https://raw.githubusercontent.com/profesorfaco/troncal/refs/heads/main/clase-06/datos-durisimos.json");
      const data = await consulta.json();
      console.log(data);
      data.forEach((d)=>{
      alla.innerHTML += `
      <article>
        <p>${d.profe}</p>
        <svg width="100%" height="100%" viewBox="0 0 42 42"><circle cx="21" cy="21" r="15.91549430918954" fill="transparent" stroke="#00f" stroke-width="2"></circle><circle class="donut-segment" cx="21" cy="21" r="15.91549430918954" fill="transparent" stroke="#eef" stroke-width="2" stroke-dasharray="${100-d.porcentajes} ${d.porcentajes}" stroke-dashoffset="25"></circle><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="7">${d.porcentajes}%</text><text x="50%" y="65%" dominant-baseline="middle" text-anchor="middle" font-size="2">${d.titulades} de ${d.guiades}</text></svg>
      </article>`;
      })
    }
    datos().catch((error) => console.error(error));
    </script>
  </body>
</html>